<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>PSET7 D3 Visualization Webpage</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.1.1/d3.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="stylepset8.css">

<style>
</style>


</head>

<body>
	<main role="main" class="container" >

	<div class="row">
			<div class="col-12">
				<h1> Boston 311 Requests </h1>
			</div>
	</div>

	<div class="row">
			<div class="col-12">
				<div id ="bar-chart">
			</div>
			</div>
	</div>


	<div id = "main">
		<div id = "tooltip" class="hidden">
		</div>
	</div>

	</main>


<script>


// define svg
const width = 800;
const height = 600;
const marginLeft = 300;
const marginTop = 80;
const barHeight = 30;
const gap = 5;
const widthMultiplier = 0.01;

const svg = d3.select("#bar-chart")
					.append("svg")
					.attr("viewBox", [0, 0, width, height]);

//reading data
	d3.csv("https://angelalm97.github.io/pset8/boston_311.csv")
					.then(function(data) {
						console.log(data);

//MASTER xAxis
	const newArray = data.map(d => d.columnName);
	const xValues = data.map (d => d.total_count);
// x linear scale
	const x = d3.scaleLinear()
	    .domain([0, d3.max(xValues)])
	    .range([0, width]);
//define x-axis
	const xAxis = d3.axisTop(x)
								.ticks(10)
								.tickPadding(10);

//MASTER YAXIS
	const newnewArray = data.map(d => d.columnName);
	const yValues = data.map (d => d.Name);
//defining yScale
	const y = d3.scaleBand()
		.domain(yValues)
		.range([height, 0])
		.paddingInner(0.15);
//define y-axis
const yAxis = d3.axisLeft(y)
								.ticks(10);


//rectanglebars
// add rectangle bars
svg.append("g")
		.attr("class", "rect-bars")
.selectAll("rect")
		.data(data)
		.enter()
		.append("rect")
				.attr("y", 0)
				.attr("x", data.map(d=>d.total_count) * widthMultiplier)
				.attr("width", d => d[8])
				.attr("height", 30)
				.attr("fill", "teal");

svg.append("g")
		.attr("class", "x-axis hidden")
		.attr("transform", "translate(0, 300)")
		.call(xAxis);

svg.append("g")
		.attr("class", "y-axis hidden")
		.attr("transform", "translate(300,0)")
		.call(yAxis);

	});

//y linear scale


</script>


</body>
</html>
